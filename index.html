<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emoji Safety Matching Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 20px;
        }
        .emoji-story, .options {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .emoji-story div, .options div {
            margin: 0 10px;
            padding: 10px;
            border: 2px solid #ddd;
            cursor: pointer;
        }
        #result {
            font-size: 20px;
            color: green;
            margin-top: 20px;
        }
        .dropzone {
            border: 2px dashed #ccc;
            min-width: 200px;
            padding: 10px;
        }
        .dragged {
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <h1>Emoji Safety Matching Game</h1>
    <p>Drag and drop the emoji story to the correct online safety tip to find the code!</p>

    <div class="emoji-story">
        <div id="emoji1" draggable="true" ondragstart="drag(event)">ğŸ‘€ğŸš«ğŸ”—</div>
        <div id="emoji2" draggable="true" ondragstart="drag(event)">ğŸ”’ğŸ’ªğŸ”¡ğŸ”¢</div>
        <div id="emoji3" draggable="true" ondragstart="drag(event)">ğŸ“±ğŸ”2ï¸âƒ£</div>
    </div>

    <div class="options">
        <div id="option1" class="dropzone" ondrop="drop(event, 'emoji1', 'Donâ€™t click suspicious links', 2)" ondragover="allowDrop(event)">Donâ€™t click suspicious links</div>
        <div id="option2" class="dropzone" ondrop="drop(event, 'emoji2', 'Use a strong password', 7)" ondragover="allowDrop(event)">Use a strong password</div>
        <div id="option3" class="dropzone" ondrop="drop(event, 'emoji3', 'Enable Two-Factor Authentication', 4)" ondragover="allowDrop(event)">Enable Two-Factor Authentication</div>
    </div>

    <div id="result"></div>
    <p>Find the correct matches to reveal the code!</p>

    <script>
        let code = '';
        let foundMatches = {};
        let completedMatches = 0;
        let delayTimes = { emoji1: 1000, emoji2: 1000, emoji3: 1000 }; // Initial delay for each emoji

        function allowDrop(event) {
            event.preventDefault();
        }

        function drag(event) {
            event.dataTransfer.setData("text", event.target.id);
            event.target.classList.add('dragged');
        }

        function drop(event, emojiId, correctMatch, number) {
            event.preventDefault();
            const draggedEmojiId = event.dataTransfer.getData("text");

            // If the dragged emoji is correct
            if (draggedEmojiId === emojiId && !foundMatches[emojiId]) {
                foundMatches[emojiId] = true;
                code += number;
                document.getElementById(draggedEmojiId).style.visibility = "hidden";
                completedMatches++;

                document.getElementById('result').innerHTML = `Code so far: ${code}`;
                
                if (completedMatches === 3) {
                    document.getElementById('result').innerHTML = `Success! The final code is: ${code}`;
                }
            } else {
                // Incorrect match handling
                event.target.style.backgroundColor = "#f99";
                document.getElementById('result').innerHTML = "Incorrect match, try again.";

                // Disable dragging for a short delay to deter guessing
                disableDragFor(emojiId);
            }
        }

        function disableDragFor(emojiId) {
            const emojiElement = document.getElementById(emojiId);
            emojiElement.setAttribute("draggable", "false");

            setTimeout(() => {
                emojiElement.setAttribute("draggable", "true");
                emojiElement.classList.remove('dragged');
                document.getElementById('result').innerHTML = ""; // Clear result message
            }, delayTimes[emojiId]);

            // Increase the delay after every wrong attempt
            delayTimes[emojiId] += 1000;
        }
    </script>
</body>
</html>
