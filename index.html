<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emoji Safety Matching Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 20px;
        }
        .emoji-story, .options {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .emoji-story div {
            margin: 0 10px;
            padding: 10px;
            border: 2px solid #ddd;
            cursor: pointer;
        }
        .options {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 4 tips per row */
            gap: 10px;
            justify-content: center;
            max-width: 800px; /* Limit width for proper layout */
            margin: 0 auto; /* Center grid */
        }
        .dropzone {
            border: 2px dashed #ccc;
            padding: 10px;
            cursor: pointer;
            text-align: center;
        }
        .dragged {
            background-color: #f0f0f0;
        }
        .disabled {
            background-color: #ccc;
            pointer-events: none;
        }
        #penalty-clock {
            font-size: 18px;
            color: red;
            margin-top: 10px;
        }
        #result {
            font-size: 20px;
            color: green;
            margin-top: 20px;
        }
        .code-digit {
            font-weight: bold;
            color: black;
        }
    </style>
</head>
<body>
    <h1>Emoji Safety Matching Game</h1>
    <p>Drag and drop the emoji story to the correct online safety tip to find the code! Be careful: an incorrect guess will hide the revealed digit and impose a delay before you can try again.</p>

    <div class="emoji-story">
        <div id="emoji1" draggable="true" ondragstart="drag(event)">ğŸ‘€ğŸš«ğŸ”—</div>
        <div id="emoji2" draggable="true" ondragstart="drag(event)">ğŸ”’ğŸ’ªğŸ”¡ğŸ”¢</div>
        <div id="emoji3" draggable="true" ondragstart="drag(event)">ğŸ“±ğŸ”2ï¸âƒ£</div>
        <div id="emoji4" draggable="true" ondragstart="drag(event)">ğŸ’»ğŸ”„ğŸ“…âœ…</div>
        <div id="emoji5" draggable="true" ondragstart="drag(event)">ğŸ£ğŸš«ğŸ“§ğŸ’³</div>
    </div>

    <div class="options">
        <div id="option1" class="dropzone" ondrop="drop(event, 'emoji1', 'Donâ€™t click suspicious links', 2)" ondragover="allowDrop(event)">Donâ€™t click suspicious links</div>
        <div id="option2" class="dropzone" ondrop="drop(event, 'emoji2', 'Use a strong password', 6)" ondragover="allowDrop(event)">Use a strong password</div>
        <div id="option3" class="dropzone" ondrop="drop(event, 'emoji3', 'Enable Two-Factor Authentication', 3)" ondragover="allowDrop(event)">Enable Two-Factor Authentication</div>
        <div id="option4" class="dropzone" ondrop="drop(event, 'emoji4', 'Keep software updated', 5)" ondragover="allowDrop(event)">Keep software updated</div>
        <div id="option5" class="dropzone" ondrop="drop(event, 'emoji5', 'Avoid phishing scams', 9)" ondragover="allowDrop(event)">Avoid phishing scams</div>
        <!-- Additional 15 incorrect tips -->
        <div id="option6" class="dropzone">Use public Wi-Fi</div>
        <div id="option7" class="dropzone">Share passwords with friends</div>
        <div id="option8" class="dropzone">Never log out of shared devices</div>
        <div id="option9" class="dropzone">Donâ€™t report harassment</div>
        <div id="option10" class="dropzone">Post personal information</div>
        <div id="option11" class="dropzone">Turn off two-factor authentication</div>
        <div id="option12" class="dropzone">Use the same password for every account</div>
        <div id="option13" class="dropzone">Ignore software updates</div>
        <div id="option14" class="dropzone">Click on all links in emails</div>
        <div id="option15" class="dropzone">Open email attachments from unknown senders</div>
        <div id="option16" class="dropzone">Disable encryption on your devices</div>
        <div id="option17" class="dropzone">Share your account credentials</div>
        <div id="option18" class="dropzone">Use weak passwords</div>
        <div id="option19" class="dropzone">Store passwords in plain text</div>
        <div id="option20" class="dropzone">Don't back up your data</div>
    </div>

    <div id="result"></div>
    <p id="penalty-clock"></p>

    <script>
        let code = ['', '', '', '', '']; // Code: 26359
        let foundMatches = {};
        let completedMatches = 0;
        let delayTimes = { emoji1: 1000, emoji2: 1000, emoji3: 1000, emoji4: 1000, emoji5: 1000 }; // Initial delay
        let delayClockInterval;

        function allowDrop(event) {
            event.preventDefault();
        }

        function drag(event) {
            event.dataTransfer.setData("text", event.target.id);
            event.target.classList.add('dragged');
        }

        function drop(event, emojiId, correctMatch, number) {
            event.preventDefault();
            const draggedEmojiId = event.dataTransfer.getData("text");

            // Correct match logic
            if (draggedEmojiId === emojiId && !foundMatches[emojiId]) {
                foundMatches[emojiId] = true;
                code[parseInt(emojiId.replace('emoji', '')) - 1] = number;
                document.getElementById(draggedEmojiId).style.visibility = "hidden";
                completedMatches++;
                updateResult();

                if (completedMatches === 5) {
                    document.getElementById('result').innerHTML = `Success! The final code is: ${code.join('')}`;
                }
            } else {
                // Incorrect match handling
                event.target.style.backgroundColor = "#f99";
                document.getElementById('result').innerHTML = "Incorrect match, try again.";
                code[parseInt(emojiId.replace('emoji', '')) - 1] = ''; // Hide the digit
                updateResult();
                disableDragFor(emojiId); // Add delay
            }
        }

        function updateResult() {
            document.getElementById('result').innerHTML = `Code so far: ${code.map(d => d || '_').join(' ')}`;
        }

        function disableDragFor(emojiId) {
            const emojiElement = document.getElementById(emojiId);
            emojiElement.setAttribute("draggable", "false");

            let delay = delayTimes[emojiId] / 1000; // Convert milliseconds to seconds
            document.getElementById('penalty-clock').innerHTML = `Penalty: ${delay} seconds remaining...`;

            // Penalty delay clock countdown
            clearInterval(delayClockInterval);
            delayClockInterval = setInterval(() => {
                delay--;
                if (delay <= 0) {
                    clearInterval(delayClockInterval);
                    emojiElement.setAttribute("draggable", "true");
                    document.getElementById('penalty-clock').innerHTML = '';
                } else {
                    document.getElementById('penalty-clock').innerHTML = `Penalty: ${delay} seconds remaining...`;
                }
            }, 1000);

            delayTimes[emojiId] += 1000; // Increase delay by 1 second for next incorrect guess
        }
    </script>
</body>
</html>
